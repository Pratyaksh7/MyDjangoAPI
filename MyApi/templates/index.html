{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Django API</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
<!--       <div class="container" >-->
<!--        <div class="form-container sign-up-container">-->

<!--            <form action="#" class="main-form needs-validation" role="form" novalidate>-->
<!--                <h3>Create Account</h3>-->
<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="text"  class="my_form-control" required>-->
<!--                        <small class="my_place">Username</small>-->
<!--                        <div class="invalid-feedback">Please fill out this field.</div>-->
<!--                    </label>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="text"  class="my_form-control" required>-->
<!--                        <small class="my_place">Your email</small>-->
<!--                        <div class="invalid-feedback">Please fill out this field.</div>-->
<!--                    </label>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="password"  class="my_form-control" required>-->
<!--                        <small class="my_place">Your password</small>-->
<!--                        <div class="invalid-feedback">Please fill out this field.</div>-->

<!--                    </label>-->
<!--                </div>-->

<!--                <div class="form-group text-center">-->
<!--                    <button type="submit" class="btn btn-primary mt-2 mx-auto" >CREATE ACCOUNT</button>-->
<!--                </div>-->



<!--            </form>-->




<!--        </div>-->

        <div class="form-container sign-in-container">

            <form id="MyForm"  class="main-form needs-validation" >
                {% csrf_token %}
                <h3>Play with Images</h3>


                <div class="form-group">

                    <label>
                        <select class="my_form-control" name="service" id="Service" required>
                            <option value="">Choose a Service</option>
                            <option value="Object Detection">Object Detection</option>
<!--                            <option value="">Face Analysis</option>-->
                            <option value="Celeb Detect.">Celeb Detect.</option>
                        </select>

<!--                        <div class="invalid-feedback">Please fill out this field.</div>-->
                    </label>
                </div>

                <div class="form-group">
                    <label>
                        <input type="file" id="inputImage" onchange="ChangeImage(event)" class="my_form-control" name="image" required>
<!--                        <small class="my_place">Your password</small>-->
<!--                        <div class="invalid-feedback">Please fill out this field.</div>-->

                    </label>
                </div>
                <br>

                <div class="form-group text-center">
                    <button type="submit" class="btn btn-primary mt-2 mx-auto" >Play</button>
                </div>

<!--                <div class="form-group mt-2 text-center">-->
<!--                    <span class="forgot">Forgot password ?</span>-->
<!--                </div>-->

            </form>

        </div>


        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h1>Welcome Back!</h1>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod</p>
                    <button class="ghost" >SIGN IN</button>

                </div>
                <div class="overlay-panel overlay-right">
                    <h1>Django API</h1>
                    <p>The image will be shown here:</p>
                    <img id="outImage" src="{% static 'images/svg1.png' %}" alt="">
<!--                    <button class="ghost" >CREATE ACCOUNT</button>-->
                </div>
            </div>
        </div>

<!--    </div>-->
       <script>
           function ChangeImage(e) {
            var image = document.getElementById("outImage");
            image.src = URL.createObjectURL(e.target.files[0]);
           }
       </script>

        <script>
            const myForm = document.getElementById("MyForm");
            const myFile = document.getElementById("inputImage");
            const myService = document.getElementById("Service");

            const formData = new FormData();

            myForm.addEventListener("submit",e => {
                e.preventDefault();
                formData.append("image",myFile.files[0]);
                formData.append("service",myService.value);

                var response = fetch("http://127.0.0.1:8000/", {
                    method: "post",
                    body: formData
                });

                alert(response.json());


            });
        </script>

       <script src="{% static 'js/index.js' %}"></script>
</body>
</html>